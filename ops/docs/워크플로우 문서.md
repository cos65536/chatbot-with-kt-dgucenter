# ğŸ³ìë™ ë¹Œë“œ+ë°°í¬ ê°€ì´ë“œ: 
# ë°±ì—”ë“œ RunPod ë°°í¬ + í”„ë¡ íŠ¸ì—”ë“œ ì»¨í…Œì´ë„ˆ ë¹Œë“œ/ë°°í¬

---
# ìë™ ë¹Œë“œ & ë°°í¬ ì‹œìŠ¤í…œ ê°€ì´ë“œ (Netlify + RunPod ê¸°ì¤€)

## 1. ì‹œìŠ¤í…œ ê°œìš”
GitHub Actionsë¥¼ í™œìš©í•œ ìë™í™” ë°°í¬ ì‹œìŠ¤í…œìœ¼ë¡œ ë‹¤ìŒ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤:
- ë°±ì—”ë“œ/í”„ë¡ íŠ¸ì—”ë“œ ë„ì»¤ ì´ë¯¸ì§€ ìë™ ë¹Œë“œ
- GitHub Container Registry(GHCR)ì— ì´ë¯¸ì§€ í‘¸ì‹œ
- RunPodì— ë°±ì—”ë“œ ì»¨í…Œì´ë„ˆ ìë™ ë°°í¬
- í”„ë¡ íŠ¸ì—”ë“œëŠ” Netlifyì— ë³„ë„ ë°°í¬ (ê¸°ë³¸ ì„¤ì •)

## 2. ì›Œí¬í”Œë¡œìš° ì„¤ì •

### 2.1 ì›Œí¬í”Œë¡œìš° íŒŒì¼ ìœ„ì¹˜
`.github/workflows/deploy.yml`


### 2.2 ì‹¤í–‰ ì¡°ê±´
- `v`ë¡œ ì‹œì‘í•˜ëŠ” íƒœê·¸ê°€ ë©”ì¸ ë¸Œëœì¹˜ì— í‘¸ì‹œë  ë•Œë§Œ ì‹¤í–‰
- ì˜ˆ: `git tag v1.0 && git push origin v1.0`

## 3. í•„ìˆ˜ ì„¤ì •

### 3.1 RunPod ì„¤ì •
1. [RunPod ì½˜ì†”](https://www.runpod.io/console/pods)ì—ì„œ íŒŸ ìƒì„±
2. í•„ìˆ˜ ì„¤ì • ê°’:
   - GPU: 1ê°œ (NVIDIA RTX 5000 ë“±)
   - Container Disk: 20GB
   - Port: `8000/http`
   - í™˜ê²½ë³€ìˆ˜: `NVIDIA_VISIBLE_DEVICES=all`

### 3.2 GitHub Secrets
ë¦¬í¬ì§€í† ë¦¬ Settings â†’ Secrets and variables â†’ Actionsì—ì„œ ë‹¤ìŒ ê°’ ì„¤ì •:

| Secret ì´ë¦„             | ì„¤ëª…                     |
|------------------------|--------------------------|
| RUNPOD_API_KEY         | RunPod API í‚¤            |
| RUNPOD_BACKEND_POD_ID  | ìƒì„±í•œ ë°±ì—”ë“œ íŒŸ ID      |
| SERVICE_KEY            | ë°±ì—”ë“œ ì„œë¹„ìŠ¤ í‚¤         |
| NAVER_CLIENT_ID        | ë„¤ì´ë²„ API í´ë¼ì´ì–¸íŠ¸ ID |
| NAVER_CLIENT_SECRET    | ë„¤ì´ë²„ API í´ë¼ì´ì–¸íŠ¸ ì‹œí¬ë¦¿ |

### 3.3 RunPodê³¼ í”„ë¼ì´ë¹— ë¦¬í¬ì§€í† ë¦¬ ì—°ë™

1. **GitHub Personal Access Token ìƒì„±**  
   - GitHub â†’ Settings â†’ Developer settings â†’ Personal access tokens â†’ Tokens (classic) â†’ Generate new token (classic)  
   - ê¶Œí•œ ì„¤ì •:  
     - `read:packages` âœ…  
     - `repo` (í”„ë¼ì´ë¹— ì €ì¥ì†Œì¸ ê²½ìš°) âœ…  
   - ìƒì„±ëœ í† í° ë³µì‚¬ (í•œ ë²ˆë§Œ í‘œì‹œë¨)

2. **RunPodì— ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì¸ì¦ ì¶”ê°€**  
   - RunPod ëŒ€ì‹œë³´ë“œ â†’ Settings â†’ Container Registry â†’ Add Registry  
   - ì…ë ¥ ì •ë³´:  
     - **Registry URL**: `ghcr.io`  
     - **Username**: GitHub ì‚¬ìš©ìëª…  
     - **Password**: ìƒì„±í•œ Personal Access Token  
   - ì €ì¥ í›„ ìƒì„±ëœ **Auth ID** ë³µì‚¬ (ì˜ˆ: `clzdaifot0001l90809257ynb`)

3. **GitHub Actions ì—…ë°ì´íŠ¸**  

```yaml
   - name: Update backend container on RunPod
  run: |
    # ... (ê¸°ì¡´ ì½”ë“œ ìœ ì§€) ...
    
    # íŒŸ ì—…ë°ì´íŠ¸ ë¶€ë¶„ ìˆ˜ì •
    UPDATE_RESPONSE=$(curl -s --request PATCH \
      --url "$RUNPOD_API_BASE/$POD_ID" \
      --header "Authorization: Bearer ${{ secrets.RUNPOD_API_KEY }}" \
      --header "Content-Type: application/json" \
      --data "{
        \"imageName\": \"$IMAGE_NAME_LOWER\",
        \"containerDiskInGb\": 20,
        \"containerRegistryAuthId\": \"${{ secrets.RUNPOD_REGISTRY_AUTH_ID }}\",
        \"ports\": [\"8000/http\"],
        \"env\": {
          \"NVIDIA_VISIBLE_DEVICES\": \"all\",
          \"SERVICE_KEY\": \"${{ secrets.SERVICE_KEY }}\",
          \"NAVER_CLIENT_ID\": \"${{ secrets.NAVER_CLIENT_ID }}\",
          \"NAVER_CLIENT_SECRET\": \"${{ secrets.NAVER_CLIENT_SECRET }}\"
        },
        \"volumeInGb\": 50,
        \"volumeMountPath\": \"/workspace\"
      }")

   # ... (ë‚˜ë¨¸ì§€ ì½”ë“œ ìœ ì§€) ...
```

4. **GitHub Secrets ì¶”ê°€**
- Settings â†’ Secrets and variables â†’ Actions â†’ New repository secret
- Name: RUNPOD_REGISTRY_AUTH_ID
- Value: RunPodì—ì„œ ë³µì‚¬í•œ Auth ID


## 4. ë°°í¬ í”„ë¡œì„¸ìŠ¤

1. ì´ë¯¸ì§€ ë¹Œë“œ ë‹¨ê³„:
   - ë°±ì—”ë“œ/í”„ë¡ íŠ¸ì—”ë“œ ë„ì»¤ ì´ë¯¸ì§€ ë¹Œë“œ
   - GHCRì— ì´ë¯¸ì§€ í‘¸ì‹œ

2. ë°°í¬ ë‹¨ê³„:
   - ê¸°ì¡´ RunPod íŒŸ ì¤‘ì§€
   - ìƒˆ ì´ë¯¸ì§€ë¡œ íŒŸ ì—…ë°ì´íŠ¸
   - íŒŸ ì¬ì‹œì‘

## 5. ì´ë¯¸ì§€ ì‚¬ìš© ë°©ë²•


# ë°±ì—”ë“œ ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸°
> docker pull ghcr.io/chatbot-with-kt-dgucenter/chatbot-with-kt-dgucenter-backend:latest

# í”„ë¡ íŠ¸ì—”ë“œ ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸°
> docker pull ghcr.io/chatbot-with-kt-dgucenter/chatbot-with-kt-dgucenter-frontend:latest


## 6. í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬

- **GitHub Secrets**: CI/CD ìë™í™”ìš© ë¯¼ê°ì •ë³´ ì €ì¥
- **RunPod í™˜ê²½ë³€ìˆ˜**: ë°±ì—”ë“œ ì‹¤í–‰ì‹œ í•„ìš”í•œ ì„¤ì •ê°’
- **Netlify í™˜ê²½ë³€ìˆ˜**: í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œì‹œ í•„ìš”í•œ ê°’

> ì£¼ì˜: ëª¨ë“  ë¯¼ê°ì •ë³´ëŠ” ë°˜ë“œì‹œ Secretsì´ë‚˜ í™˜ê²½ë³€ìˆ˜ë¡œ ê´€ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.

## 7. ë¬¸ì œ í•´ê²°

- **íŒŸ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨**: RunPod ì½˜ì†”ì—ì„œ ìˆ˜ë™ í™•ì¸
- **ì´ë¯¸ì§€ í‘¸ì‹œ ì‹¤íŒ¨**: GitHub Token ê¶Œí•œ í™•ì¸
- **í™˜ê²½ë³€ìˆ˜ ì˜¤ë¥˜**: Secrets ê°’ ì¬í™•ì¸

## 8. Netlify ì´ìš© ë°°í¬
 - Netlify : ë„ì»¤ ì‚¬ìš© X
 - ì—°ê²°ëœ ë¦¬í¬ì§€í† ë¦¬ì— Pushê°€ ìˆì„ë•Œë§ˆë‹¤ ìë™ìœ¼ë¡œ ì†ŒìŠ¤ì½”ë“œë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
- **Frontend/src/conponents/ChatBot.jsx íŒŒì¼ ì—…ë°ì´íŠ¸ í•„ìš”**
```
      // ===================================================================
      // [Netlify Functions ì‚¬ìš© ì‹œ] - ì•„ë˜ 1ì¤„ ì£¼ì„ í•´ì œí•˜ê³  ë‚˜ë¨¸ì§€ ì£¼ì„ ì²˜ë¦¬
      // const endpoint = '/.netlify/functions/chat';
      // ===================================================================
      // [ë°±ì—”ë“œ ì§ì ‘ í˜¸ì¶œ ì‹œ] - ì•„ë˜ 2ì¤„ ì£¼ì„ í•´ì œ (ë„ì»¤, ì†ŒìŠ¤ì½”ë“œ ë°°í¬ ê¸°ë³¸ê°’)
      //const API_URL = process.env.REACT_APP_API_URL;
      //const endpoint = `${API_URL}/api/chat`;
      // ===================================================================
```
- í˜„ì¬ëŠ” ë„ì»¤ ì´ë¯¸ì§€ ë°°í¬ê°€ ì£¼ ëª©ì ì´ê¸° ë•Œë¬¸ì—, Netlifyì—ì„œë„ ì§ì ‘í˜¸ì¶œ ì½”ë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
- í•˜ì§€ë§Œ ì´ë°©ì‹ì€ ìš”ì²­ URLì— ë°±ì—”ë“œ ì„œë²„ì˜ í‚¤ê°€ ì§ì ‘ì ìœ¼ë¡œ í¬í•¨ë˜ë¯€ë¡œ ë³´ì•ˆìƒìœ¼ë¡œ ì•ˆì „í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
- Netlifyì˜ ëŸ°íƒ€ì„ ì „ë‹¬ ê¸°ëŠ¥ì„ í™œì„±í™” í•˜ëŠ” í•¨ìˆ˜ë¥¼ êµ¬í˜„í•´ë‘ì–´ì„œ, í•´ë‹¹ ì†ŒìŠ¤íŒŒì¼ë§Œ ìˆ˜ì •ì‹œ ë°”ë¡œ ì ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.
> ë„·í”Œë¦¬íŒŒì´ ì„¤ì •íŒŒì¼ **Netlify/~ , netlify.toml** 
- Netlify ì›¹ìƒì—ì„œ Secretë“±ë¡ ë° functionê¸°ëŠ¥ í™œì„±í™” í•„ìš”.