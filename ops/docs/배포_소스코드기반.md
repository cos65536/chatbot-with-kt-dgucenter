# DSL ChatBot Project

- AI 기반 대화형 챗봇 서비스

## 로컬 / 서버 소스코드 기반 가이드라인

## 📋 시스템 요구사항

### 필수 하드웨어
- **GPU**: NVIDIA GPU (CUDA 지원)
- **VRAM**: 4GB 이상 (권장 8GB+)
- **RAM**: 8GB 이상 (권장 16GB+)
- **저장공간**: 10GB 이상

### 지원 운영체제
- **Linux**: Ubuntu 20.04+
- **Windows**: Windows 11 with WSL 2
- **macOS**: Intel Mac

## 🔧 사전 설치

### 1. NVIDIA 드라이버 설치
```bash
# Ubuntu
sudo apt update
sudo apt install nvidia-driver-535
nvidia-smi
```

### 2. Docker & Docker Compose 설치
```bash
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo apt install docker-compose-plugin
sudo usermod -aG docker $USER
newgrp docker
```

### 3. NVIDIA Container Toolkit 설치
```bash
distribution=$(. /etc/os-release;echo $ID$VERSION_ID)
curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | sudo apt-key add -
curl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list | sudo tee /etc/apt/sources.list.d/nvidia-docker.list

sudo apt-get update && sudo apt-get install -y nvidia-docker2
sudo systemctl restart docker
```

## 🚀 설치 및 실행

### 1. 저장소 클론
```bash
git clone <repository-url>
cd DSL_CHAT_BOT
```

### 2. 환경변수 설정
```bash
nano backend/.env #백엔드 환경변수 입력
nano frontend/.env #프론트엔드 환경변수 입력
```
| 변수 이름 | 설명 | 필수 | 위치 |
|-----------|------|------|--------|
| `SERVICE_KEY` | 정책 데이터 API | ✅ | backend |
| `NAVER_CLIENT_ID` | 네이버 API 클라이언트 ID | ✅ | backend |
| `NAVER_CLIENT_SECRET` | 네이버 API 클라이언트 시크릿 | ✅ | backend |
| `REACT_APP_API_URL` | 프론트엔드에서 사용할 API 주소 | ✅ | frontend |

- 환경변수 예시

```bash
#backend/.env
SERVICE_KEY=your_service_key_here
NAVER_CLIENT_ID=your_naver_client_id
NAVER_CLIENT_SECRET=your_naver_client_secret

# frontend/.env
REACT_APP_API_URL=http://localhost:8000

```

### 3. 실행

```bash
docker-compose up --build

# 백그라운드 실행
docker-compose up --build -d
```

### 4. 접속

- **Frontend**: http://localhost:3000
- **Backend API**: http://localhost:8000
- **GPU 상태**: http://localhost:8000/gpu-status

## 📊 성능 벤치마크

| GPU 모델 | VRAM | 응답 시간 |
|----------|------|-----------|
| CPU Only | - | ~180초 |
| GTX 1660 | 6GB | ~45초 |
| RTX 3070 | 8GB | ~20초 |
| **RTX 3080 Ti** | **12GB** | **~12초** |
| **A40** | **48GB** | **~8초** |
| **A100 80GB** | **80GB** | **~3초** |

### 실제 테스트 환경
- **GPU**: RTX 3080Ti , A40 , A100
- **테스트일**: 2025-08-15

## 🛠️ 트러블슈팅

### GPU 인식 안됨
```bash
nvidia-smi
docker run --rm --gpus all nvidia/cuda:11.8-base-ubuntu20.04 nvidia-smi
docker-compose down && docker-compose up --build
```

### 메모리 부족
- VRAM 4GB 미만: docker-compose.yml에서 GPU 설정 제거

### 빌드 오류
```bash
docker system prune -a
docker-compose build --no-cache
```

### WSL 2 최적화 (Windows)
```ini
# C:\Users\{사용자}\.wslconfig
[wsl2]
memory=16GB
processors=8
swap=8GB
```

## 📁 프로젝트 구조
 ### 로컬 실행시 필요없는 파일은 ❌ 로 표기 (CI/CD, 네트리파이..)
 ### 로컬 실행시 수정 필요한 파일은 🔄️ 로 표기. (파일존재시 주석 참조)
 ### 로컬 실행시 생성 필요한 파일은 ✅ 로 표기
```
chatbot-with-kt-dgucenter/
├── .gitignore                  # Git 무시 파일
├── README.md                   # 프로젝트 설명서
├── docker-compose.yml          # 도커 컴포즈 설정
├── .github/                    # CI /CD 폴더❌
│   └──  workflows/             # Github 액션 파일❌
├──     └── deploy.yml          # CI/CD 자동화 문서❌
├── ops/                        # 문서 및 운영 자료❌
│   ├── images/                 # README용 이미지❌
│   ├── docs/                   # 추가 문서❌
│   └── presentations/          # 발표 자료❌
└── DSL_CHAT_BOT/               # 챗봇 소스코드
    ├── backend/
    │   ├── Dockerfile          # 백엔드 도커파일
    │   ├── config/
    │   │   ├── __init__.py
    │   │   ├── constants.py    # 카테고리 상수, 모델명
    │   │   └── settings.py     # API 키 불러오기, API URL, DB 경로
    │   ├── data/
    │   │   ├── final_data.csv  # 사업장 데이터
    │   │   └── master_summary_final.csv # 창업률 통계
    │   ├── models/
    │   │   ├── __init__.py
    │   │   ├── embedding_model.py # ko-sroberta 임베딩
    │   │   └── llm_model.py    # Midm-2.0-Mini LLM
    │   ├── services/
    │   │   ├── __init__.py
    │   │   ├── labeling.py     # 질문 카테고리 라벨링
    │   │   ├── policy_service.py # 정책 정보 검색
    │   │   ├── startup_service.py # 창업 데이터 분석
    │   │   └── trend_service.py # 트렌드 분석
    │   ├── utils/
    │   │   ├── __init__.py
    │   │   └── text_processor.py # CSV→텍스트 변환
    │   ├── main.py             # FastAPI 서버
    │   ├── rag_llm.py          # 호환성 레이어
    │   ├── requirements.txt    # Python 의존성
    │   └── .env                # API키 저장 ✅
    └── frontend/
        ├── Dockerfile          # 프론트엔드 도커파일
        ├── netlify/                  # Netlify Functions 폴더❌
        │   └── functions/
        │       └── chat.js           # Functions 핸들러❌
        ├── public/
        ├── src/
        │   ├── components/
        │   │   ├── ChatBot.jsx       # 메인 챗봇 컴포넌트 🔄️
        │   │   ├── ChatBubble.jsx    # 채팅 말풍선
        │   │   ├── ChatHeader.jsx    # 챗봇 헤더
        │   │   ├── ChatInput.jsx     # 입력창
        │   │   ├── ChatMessages.jsx  # 메시지 목록
        │   │   └── ThemeToggle.jsx   # 테마 토글
        │   ├── context/
        │   │   └── ThemeContext.jsx  # 테마 컨텍스트
        │   ├── styles/
        │   │   └── ChatStyles.css    # 스타일시트
        │   ├── App.jsx               # 메인 앱
        │   └── index.js              # 엔트리 포인트
        ├── netlify.toml              # Netlify 설정 파일 ❌
        ├── .env                      # 백엔드 요청경로 ✅
        └── package.json              # Node.js 의존성
```

## 🔧 개발자 모드

### 로컬 실행 (도커없이 실행하는경우)

```bash
# Backend
cd backend
pip install -r requirements.txt
uvicorn main:app --reload --host 0.0.0.0 --port 8000
#OR : uvicorn main:app --reload

# Frontend
cd frontend
npm install
npm start
```

**작성일**: 2025-08-15  
**테스트 환경**: RTX 3080Ti, A40, A100